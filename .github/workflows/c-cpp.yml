name: C/C++ CI

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  build-ubuntu:
    runs-on: "ubuntu-latest"

    steps:
      - uses: actions/checkout@v1
        with:
          submodules: true

      - uses: lukka/get-cmake@latest

      - name: dir
        run: find ${{ runner.workspace }}

      - name: get-cmake
        uses: lukka/get-cmake@v3.17.2

      - name: build src
        uses: lukka/run-cmake@v2
        id: runcmake
        with:
          cmakeGenerator: "Ninja"
          cmakeListsOrSettingsJson: "CMakeListsTxtBasic"
          cmakeListsTxtPath: "${{ github.workspace }}/CMakeLists.txt"
          useVcpkgToolchainFile: true
          buildWithCMakeArgs: "-- -v"
          buildDirectory: "${{ runner.workspace }}/build/"
